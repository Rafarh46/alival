<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pago Exitoso</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        .check {
            font-size: 60px;
            color: green;
        }
    </style>
</head>
<body>
    <div class="check">✅</div>
    <h1>¡Gracias por tu pago!</h1>
    <p>Tu reserva ha sido completada correctamente.</p>
    <a href="index.html">Volver a la página principal</a>

    <script>
        // Recupera los datos guardados antes del pago
        const formData = JSON.parse(localStorage.getItem('checkoutFormData'));
    
        if (formData) {
            fetch('https://alival-backend.onrender.com/api/send-email', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData),
            })
            .then(res => res.json())
            .then(data => {
                console.log('Correo enviado:', data);
                localStorage.removeItem('checkoutFormData'); // Limpia después del envío
            })
            .catch(err => {
                console.error('Error al enviar correo:', err);
            });
        }
    </script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
      const formData = JSON.parse(localStorage.getItem('reservationData'));
  
      if (!formData) return;
  
      fetch('/api/reservations', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData),
      })
      .then(res => res.json())
      .then(data => {
        if (data.message) {
          alert('✅ Reserva guardada con éxito');
          localStorage.removeItem('reservationData'); // Limpia almacenamiento local
        } else {
          alert('❌ Error: ' + data.error);
        }
      })
      .catch(err => {
        console.error('Error al enviar reserva:', err);
        alert('Error al guardar la reserva');
      });
    });
  </script>
      

 
</body>
</html>
